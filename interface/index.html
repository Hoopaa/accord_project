<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>Moteur de recherche par accords</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <style>
    .footer {
      bottom: 0;
      width: 100%;
      height: 50px;
      background-color: #f5f5f5;
    }
    .container .text-muted {
      margin: 15px 0;
    }
    .btn-chords {
      text-align: center;
      margin-bottom: 20px;
    }
    .btn-chords .row {
      margin-top: 10px;
    }


    #custom-search-input{
      padding: 3px;
      border: solid 1px #E4E4E4;
      border-radius: 6px;
      background-color: #fff;

      display: table;
    }

    #custom-search-input input{
      border: 0;
      box-shadow: none;
    }

    #custom-search-input button{
      margin: 2px 0 0 0;
      background: none;
      box-shadow: none;
      border: 0;
      color: #666666;
      padding: 0 8px 0 10px;
      border-left: solid 1px #ccc;
    }

    #custom-search-input button:hover{
      border: 0;
      box-shadow: none;
      border-left: solid 1px #ccc;
    }

    #custom-search-input .glyphicon-search{
      font-size: 23px;
    }

  </style>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>
<body>
  <div class="container">
    <div class="page-header">
      <h1>Moteur de recherche de chansons, par accords</h1>
    </div>
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2" id="custom-search-input">
        <input type="search" id="search" value="" class="form-control" placeholder="Recherche par suite d'accords">
        <span class="input-group-btn">
          <button class="btn btn-info btn-lg" type="button" onclick="onSearch()">
            <i class="glyphicon glyphicon-search"></i>
          </button>
        </span>
        <span class="input-group-btn">
          <button class="btn btn-info btn-lg" type="button" onclick="hideDisplay()">
            <i id="hideDisplay" class="glyphicon glyphicon-chevron-up"></i>
          </button>
        </span>
      </div>
    </div>
    <div class="row btn-chords">
      <div class="row">
        <h4>Note</h4>
        <div class="btn-group" id="note-btns">
          <button type="button" class="btn btn-primary active">C</button>
          <button type="button" class="btn btn-primary">D</button>
          <button type="button" class="btn btn-primary">E</button>
          <button type="button" class="btn btn-primary">F</button>
          <button type="button" class="btn btn-primary">G</button>
          <button type="button" class="btn btn-primary">A</button>
          <button type="button" class="btn btn-primary">B</button>
        </div>
      </div>
      <div class="row">
        <h4>Altération</h4>
        <div class="btn-group" id="alteration-btns">
          <button type="button" class="btn btn-primary active">♮</button>
          <button type="button" class="btn btn-primary">#</button>
          <button type="button" class="btn btn-primary">♭</button>
        </div>
      </div>
      <div class="row">
        <h4>Formation</h4>
        <div class="btn-group" id="formation-btns">
          <button type="button" class="btn btn-primary active" value="">Majeur</button>
          <button type="button" class="btn btn-primary" value="m">Mineur</button>
          <button type="button" class="btn btn-primary" value="7">7e</button>
          <button type="button" class="btn btn-primary" value="7M">7e majeur</button>
          <button type="button" class="btn btn-primary" value="m7M">7e mineur</button>
          <button type="button" class="btn btn-primary" value="6">6e</button>
        </div>
      </div>
      <div class="row">
        <h4>Supplémentaire</h4>
        <div class="btn-group" id="supp-btns">
          <button type="button" class="btn btn-primary active" value="">&nbsp;</button>
          <button type="button" class="btn btn-primary" value="(dim)">Diminué</button>
          <button type="button" class="btn btn-primary" value="(sus2)">Suspendu 2</button>
          <button type="button" class="btn btn-primary" value="(sus4)">Suspendu 4</button>
          <button type="button" class="btn btn-primary" value="(aug)">Augmenté</button>
          <button type="button" class="btn btn-primary" value="(b5)">Quinte diminuée</button>
          <button type="button" class="btn btn-primary" value="(b9)">Neuvième diminuée</button>
          <button type="button" class="btn btn-primary" value="(b13)">treizième diminuée</button>
        </div>
      </div>
      <div class="row">
        <h4>Note basse</h4>
        <div class="btn-group" id="basse-btns">
          <button type="button" class="btn btn-primary active">&nbsp;</button>
          <button type="button" class="btn btn-primary">C</button>
          <button type="button" class="btn btn-primary">D</button>
          <button type="button" class="btn btn-primary">E</button>
          <button type="button" class="btn btn-primary">F</button>
          <button type="button" class="btn btn-primary">G</button>
          <button type="button" class="btn btn-primary">A</button>
          <button type="button" class="btn btn-primary">B</button>
        </div>
        <div class="btn-group" id="basse-alteration-btns">
          <button type="button" class="btn btn-primary active">♮</button>
          <button type="button" class="btn btn-primary">#</button>
          <button type="button" class="btn btn-primary">♭</button>
        </div>
      </div>
      <div class="row">
        <mark><span id="chord-display"></span></mark>
        <br />
        <button type="button" class="btn btn-success" id="add-chord">Ajouter cet accord</button>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-12">
        <table class="table" id="table">
        <thead>
            <tr>
              <th>First column</th>
              <th>Second column</th>
              <th>Third column</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Introducing</td>
              <td>jQuery</td>
              <td>Searchable</td>
            </tr>
            <tr>
              <td>Lorem</td>
              <td>Ipsum</td>
              <td>Dolor</td>
            </tr>
            <tr>
              <td>Some</td>
              <td>More</td>
              <td>Data</td>
            </tr>
          </tbody>
        </table>
        <hr>
      </div>
    </div>
  </div>
  <footer class="footer">
    <div class="container">
      <p class="text-muted">WebMining - MSE 2017</p>
    </div>
  </footer>
  <script>
    var note = "C";
    var alteration = "";
    var formation = "";
    var supp = "";
    var basse = "";
    var basse_alteration = "";

    function displayChords() {
      var basse_temp = basse == "" ? "" : "/" + basse + basse_alteration;
      $("#chord-display").html(note + alteration + formation + supp + basse_temp);
    }

    $(document).ready(function() {
      $("#note-btns").children().click(function() {
        $("#note-btns").children().removeClass("active");
        $(this).addClass("active");

        note = $(this).html();

        displayChords();
      });
      $("#alteration-btns").children().click(function() {
        $("#alteration-btns").children().removeClass("active");
        $(this).addClass("active");

        switch ($(this).html()) {
          case "#":
            alteration = "#";
            break;
          case "♭":
            alteration = "b";
            break;
          default:
            alteration = "";
            break;
        }

        displayChords();
      });
      $("#formation-btns").children().click(function() {
        $("#formation-btns").children().removeClass("active");
        $(this).addClass("active");

        formation = $(this).attr("value");
        displayChords();
      });
      $("#supp-btns").children().click(function() {
        $("#supp-btns").children().removeClass("active");
        $(this).addClass("active");

        supp = $(this).attr("value");
        displayChords();
      });
      $("#basse-btns").children().click(function() {
        $("#basse-btns").children().removeClass("active");
        $(this).addClass("active");

        basse = $(this).html();
        if (basse == "&nbsp;")
          basse = "";

        displayChords();
      });
      $("#basse-alteration-btns").children().click(function() {
        $("#basse-alteration-btns").children().removeClass("active");
        $(this).addClass("active");

        switch ($(this).html()) {
          case "#":
            basse_alteration = "#";
            break;
          case "♭":
            basse_alteration = "b";
            break;
          default:
            basse_alteration = "";
            break;
        }

        displayChords();
      });

      $("#add-chord").click(function() {
        var search = $("#search").val();
        if (search != "" && search.substr(search.length - 1) != " ")
          $("#search").val(search + " ");
        $("#search").val($("#search").val() + $("#chord-display").html());
      });

      displayChords();
    });

    function onSearch() {
      $("#hideDisplay").removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down");
      $(".btn-chords").fadeOut();
    }

    function hideDisplay() {
      if ($(".btn-chords").is(":visible")) {
        $("#hideDisplay").removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down");
        $(".btn-chords").fadeOut();
      } else {
        $("#hideDisplay").removeClass("glyphicon-chevron-down").addClass("glyphicon-chevron-up");
        $(".btn-chords").fadeIn();
      }
    }
  </script>
</body>
</html>
